local ChromeOS = {}

local colors = {
	background = Color3.fromRGB(34, 34, 34),  -- Fondo oscuro suave
	topbar = Color3.fromRGB(45, 45, 45),  -- Barra superior con un toque más oscuro
	titleText = Color3.fromRGB(255, 255, 255),  -- Texto de título blanco
	descriptionText = Color3.fromRGB(200, 200, 200),  -- Descripción en gris claro
	closeButtonText = Color3.fromRGB(255, 255, 255),  -- Texto del botón de cerrar blanco
	closeButtonBackground = Color3.fromRGB(255, 68, 68),  -- Fondo rojo para el botón de cerrar
	contentBackground = Color3.fromRGB(50, 50, 50),  -- Fondo de contenido oscuro
	tabButtonBackground = Color3.fromRGB(70, 70, 70),  -- Fondo del botón de tabulación
	tabButtonHover = Color3.fromRGB(100, 100, 100),  -- Hover ligeramente más claro
	tabButtonActive = Color3.fromRGB(30, 30, 30),  -- Fondo cuando el tab está activo, más oscuro
	toggleOn = Color3.fromRGB(76, 175, 80),  -- Verde más suave para el toggle ON
	toggleOff = Color3.fromRGB(244, 67, 54),  -- Rojo más suave para el toggle OFF
	sliderBackground = Color3.fromRGB(120, 120, 120),  -- Fondo del slider en gris moderado
	textboxBackground = Color3.fromRGB(255, 255, 255)  -- Fondo del cuadro de texto blanco
}

local function addCorner(instance, radius)
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, radius)
	corner.Parent = instance
end

function ChromeOS.Create(titleText, descriptionText)
	local CoreGui = game:GetService("CoreGui")
	local gui = Instance.new("ScreenGui")
	gui.Parent = CoreGui
	
	local mainFrame = Instance.new("Frame")
	mainFrame.Size = UDim2.new(0, 700, 0, 400)
	mainFrame.Position = UDim2.new(0.5, -350, 0.5, -230)
	mainFrame.BackgroundColor3 = colors.background
	mainFrame.BorderSizePixel = 3
	mainFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)
	mainFrame.BackgroundTransparency = 0.2
	mainFrame.Parent = gui
	mainFrame.Active = true
	mainFrame.Draggable = true
	addCorner(mainFrame, 12)
	
	local shadow = Instance.new("ImageLabel")
	shadow.Size = UDim2.new(1, 30, 1, 30)
	shadow.Position = UDim2.new(0, -15, 0, -15)
	shadow.Image = "rbxassetid://1316045217"
	shadow.ImageTransparency = 0.5
	shadow.BackgroundTransparency = 1
	shadow.ZIndex = -1
	shadow.Parent = mainFrame
	
	local topBar = Instance.new("Frame")
	topBar.Size = UDim2.new(1, 0, 0, 40)
	topBar.BackgroundColor3 = colors.topbar
	topBar.BorderSizePixel = 0
	topBar.BackgroundTransparency = 0.1
	topBar.Parent = mainFrame
	addCorner(topBar, 12)
	
	local titleLabel = Instance.new("TextLabel")
	titleLabel.Name = "TitleLabel"
	titleLabel.Font = Enum.Font.GothamBold
	titleLabel.TextSize = 28
	titleLabel.TextColor3 = colors.titleText
	titleLabel.BackgroundTransparency = 1
	titleLabel.Position = UDim2.new(0, 160, 0.5, -3)
	titleLabel.Text = titleText or "Título"
	titleLabel.Parent = topBar
	
	local descriptionLabel = Instance.new("TextLabel")
	descriptionLabel.Name = "DescriptionLabel"
	descriptionLabel.Font = Enum.Font.Gotham
	descriptionLabel.TextSize = 18
	descriptionLabel.TextColor3 = colors.descriptionText
	descriptionLabel.BackgroundTransparency = 1
	descriptionLabel.Position = UDim2.new(0, 280, 0.5, 1)
	descriptionLabel.Text = descriptionText or "Descripción"
	descriptionLabel.Parent = topBar
	
	-- Funciones para actualizar el título y la descripción
	local function setTitle(newTitle)
		titleLabel.Text = newTitle
	end
	local function setDescription(newDesc)
		descriptionLabel.Text = newDesc
	end
	
	local backgroundOverlay = Instance.new("Frame")
	backgroundOverlay.Size = UDim2.new(1, 0, 1, 0)
	backgroundOverlay.Position = UDim2.new(0, 0, 0, 0)
	backgroundOverlay.ZIndex = 2
	backgroundOverlay.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	backgroundOverlay.BackgroundTransparency = 0.4
	backgroundOverlay.Parent = mainFrame
	backgroundOverlay.Visible = false
	
	local confirmationFrame = Instance.new("Frame")
	confirmationFrame.Size = UDim2.new(0, 300, 0, 150)
	confirmationFrame.Position = UDim2.new(0.5, -150, 0.5, -75)
	confirmationFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	confirmationFrame.BackgroundTransparency = 0.2
	confirmationFrame.Parent = backgroundOverlay
	confirmationFrame.ZIndex = 3
	addCorner(confirmationFrame, 8)
	
	local confirmationLabel = Instance.new("TextLabel")
	confirmationLabel.Text = "¿Estás seguro de que quieres cerrar la GUI?"
	confirmationLabel.Font = Enum.Font.GothamBold
	confirmationLabel.TextSize = 18
	confirmationLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	confirmationLabel.BackgroundTransparency = 1
	confirmationLabel.Size = UDim2.new(1, 0, 0, 50)
	confirmationLabel.ZIndex = 5
	confirmationLabel.Parent = confirmationFrame
	
	local yesButton = Instance.new("TextButton")
	yesButton.Text = "Sí"
	yesButton.Font = Enum.Font.GothamBold
	yesButton.ZIndex = 5
	yesButton.TextSize = 16
	yesButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	yesButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
	yesButton.Size = UDim2.new(0.5, -10, 0, 40)
	yesButton.Position = UDim2.new(0, 5, 1, -45)
	yesButton.Parent = confirmationFrame
	addCorner(yesButton, 8)
	
	local noButton = Instance.new("TextButton")
	noButton.Text = "No"
	noButton.Font = Enum.Font.GothamBold
	noButton.TextSize = 16
	noButton.ZIndex = 5
	noButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	noButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
	noButton.Size = UDim2.new(0.5, -10, 0, 40)
	noButton.Position = UDim2.new(0.5, 5, 1, -45)
	noButton.Parent = confirmationFrame
	addCorner(noButton, 8)
	
	local closeButton = Instance.new("TextButton")
	closeButton.Text = "✕"
	closeButton.Font = Enum.Font.GothamBold
	closeButton.TextSize = 18
	closeButton.TextColor3 = colors.closeButtonText
	closeButton.BackgroundColor3 = colors.closeButtonBackground
	closeButton.Size = UDim2.new(0, 30, 0, 30)
	closeButton.Position = UDim2.new(1, -40, 0, 5)
	closeButton.BackgroundTransparency = 0.2
	closeButton.Parent = topBar
	addCorner(closeButton, 8)
	
	closeButton.MouseButton1Click:Connect(function()
		backgroundOverlay.Visible = true
	end)
	
	yesButton.MouseButton1Click:Connect(function()
		gui:Destroy()
	end)
	
	noButton.MouseButton1Click:Connect(function()
		backgroundOverlay.Visible = false
	end)
	
	closeButton.MouseEnter:Connect(function()
		closeButton.BackgroundTransparency = 0
	end)
	
	closeButton.MouseLeave:Connect(function()
		closeButton.BackgroundTransparency = 0.2
	end)
	
	local contentFrame = Instance.new("Frame")
	contentFrame.Size = UDim2.new(1, 0, 1, -60)
	contentFrame.Position = UDim2.new(0, 0, 0, 60)
	contentFrame.BackgroundColor3 = colors.contentBackground
	contentFrame.BorderSizePixel = 0
	addCorner(contentFrame, 12)
	contentFrame.BackgroundTransparency = 0.2
	contentFrame.Parent = mainFrame
	
	local tabScroll = Instance.new("ScrollingFrame")
	tabScroll.Size = UDim2.new(1, 0, 0, 40)
	tabScroll.Position = UDim2.new(0, 0, 0, 40)
	tabScroll.CanvasSize = UDim2.new(0, 600, 0, 0)
	tabScroll.ScrollBarThickness = 1
	tabScroll.BackgroundColor3 = colors.background
	tabScroll.BackgroundTransparency = 0
	tabScroll.Parent = mainFrame
	
	local tabLayout = Instance.new("UIListLayout")
	tabLayout.FillDirection = Enum.FillDirection.Horizontal
	tabLayout.Padding = UDim.new(0, 5)
	tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
	tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
	tabLayout.Parent = tabScroll
	
	local tabFrames = {}
	local currentTabButton = nil
	local currentTabFrame = nil
	
	local function getNextOrder(parent)
		local order = 0
		for _, child in ipairs(parent:GetChildren()) do
			if child:IsA("GuiObject") and not child:IsA("UIListLayout") then
				order = math.max(order, child.LayoutOrder or 0)
			end
		end
		return order + 1
	end
	
	-- Actualiza el CanvasSize contando sólo los botones de tab
	local function updateTabCanvasSize()
		local count = 0
		for _, child in ipairs(tabScroll:GetChildren()) do
			if child:IsA("TextButton") then
				count = count + 1
			end
		end
		tabScroll.CanvasSize = UDim2.new(0, 130 * count + 5 * (count - 1), 0, 40)
	end
	
	-- Función para agregar un nuevo Tab
	local function AddTab(tabName)
		local tabButton = Instance.new("TextButton")
		tabButton.Size = UDim2.new(0, 130, 1, 0)
		tabButton.Text = tabName
		tabButton.Font = Enum.Font.GothamBold
		tabButton.TextSize = 14
		tabButton.BackgroundColor3 = colors.tabButtonBackground
		tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		tabButton.BackgroundTransparency = 0.4
		tabButton.LayoutOrder = getNextOrder(tabScroll)
		tabButton.Parent = tabScroll
		addCorner(tabButton, 8)
		
		local tabFrame = Instance.new("Frame")
		tabFrame.Size = UDim2.new(1, 0, 1, -80)
		tabFrame.Position = UDim2.new(0, 0, 0, 80)
		tabFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		tabFrame.BackgroundTransparency = 0.3
		tabFrame.Visible = false
		tabFrame.Parent = mainFrame
		
		local frameScroll = Instance.new("ScrollingFrame")
		frameScroll.Size = UDim2.new(1, -10, 1, -10)
		frameScroll.Position = UDim2.new(0, 5, 0, 5)
		frameScroll.CanvasSize = UDim2.new(0, 0, 2, 0)
		frameScroll.ScrollBarThickness = 4
		frameScroll.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		frameScroll.BackgroundTransparency = 0.2
		frameScroll.ScrollingDirection = Enum.ScrollingDirection.Y
		frameScroll.Parent = tabFrame
		
		local buttonLayout = Instance.new("UIListLayout")
		buttonLayout.Padding = UDim.new(0, 5)
		buttonLayout.SortOrder = Enum.SortOrder.LayoutOrder
		buttonLayout.Parent = frameScroll
		
		local corner = Instance.new("UICorner")
		corner.CornerRadius = UDim.new(0, 8)
		corner.Parent = tabFrame
		
		tabFrames[tabName] = tabFrame
		updateTabCanvasSize()
		
		tabButton.MouseEnter:Connect(function()
			tabButton.BackgroundTransparency = 0.2
		end)
		
		tabButton.MouseLeave:Connect(function()
			if tabButton ~= currentTabButton then
				tabButton.BackgroundTransparency = 0.4
			end
		end)
		
		tabButton.MouseButton1Click:Connect(function()
			if currentTabButton then
				currentTabButton.BackgroundColor3 = colors.tabButtonBackground
				currentTabButton.BackgroundTransparency = 0.4
			end
			
			tabButton.BackgroundColor3 = colors.tabButtonActive
			tabButton.BackgroundTransparency = 0.2
			
			if currentTabFrame then
				currentTabFrame.Visible = false
			end
			
			tabFrame.Visible = true
			currentTabButton = tabButton
			currentTabFrame = tabFrame
		end)
		
		return frameScroll
	end
	
	-- Función para agregar un botón dentro de un tab (o cualquier otro contenedor)
	local function addButton(parent, text, callback)
		local buttonFrame = Instance.new("Frame")
		buttonFrame.Size = UDim2.new(1, 0, 0, 60)
		buttonFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
		buttonFrame.BackgroundTransparency = 0.6
		buttonFrame.Parent = parent
		addCorner(buttonFrame, 10)
		
		local button = Instance.new("TextButton")
		button.Size = UDim2.new(1, -20, 1, -10)
		button.Position = UDim2.new(0, 10, 0, 5)
		button.Text = text
		button.Font = Enum.Font.Gotham
		button.TextSize = 14
		button.TextColor3 = Color3.fromRGB(255, 255, 255)
		button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		button.Parent = buttonFrame
		addCorner(button, 5)
		
		button.MouseButton1Click:Connect(function()
			callback()
		end)
	end
	
	-- Se devuelve una tabla con la GUI y las funciones para modificarla
	return {
		GUI = gui,
		MainFrame = mainFrame,
		SetTitle = setTitle,
		SetDescription = setDescription,
		AddTab = AddTab,
		AddButton = addButton
	}
end

return ChromeOS
